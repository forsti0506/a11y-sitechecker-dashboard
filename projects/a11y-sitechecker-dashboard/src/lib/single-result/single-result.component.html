<mat-expansion-panel *ngFor="let violation of sortByImpact(singleResult)" class="m-2">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <mat-icon style="color: red" *ngIf="violation.impact === 'critical'" class="mr-3">error_outline</mat-icon>
      <mat-icon style="color: orange" *ngIf="violation.impact === 'serious'" class="mr-3">error_outline</mat-icon>
      <mat-icon style="color: yellow" *ngIf="violation.impact === 'moderate'" class="mr-3">error_outline</mat-icon>
      <mat-icon style="color: blue" *ngIf="violation.impact === 'minor'" class="mr-3">error_outline</mat-icon>
      <mat-icon style="color: green" *ngIf="violation.impact === null" class="mr-3">check_circle_outline</mat-icon>
      {{violation.id}}
      <span class="ml-1" matBadge="{{violation.nodes.length}}" matBadgeOverlap="false" matBadgeColor="warn"></span>
    </mat-panel-title>
    <mat-panel-description>
      <span *ngFor="let tag of violation.tags"><i>{{tag}}</i>&nbsp;&nbsp;&nbsp;</span>
    </mat-panel-description>
  </mat-expansion-panel-header>
  <p>{{violation.help}}<a href="{{violation.helpUrl}}" aria-label="Get Help" target="_blank"><mat-icon>help</mat-icon></a></p>
  <div *ngFor="let node of violation.nodes">
    <div class="m-1">CSS-Selectors: <code *ngIf="node.targetResult.target.length === 1">{{node.targetResult.target}}</code>
    <span *ngIf="node.targetResult.target.length > 1">
                        <code *ngFor="let target of node.targetResult.target" class="mr-3">{{target}}</code>
    </span></div>
    <div class="m-1">HTML: <code>{{node.html}}</code></div>
    <button (click)="node.targetResult['open'] = !node.targetResult['open']" class="btn btn-xs btn-link link">Show Urls ({{node.targetResult.urls.length}})</button>
    <div *ngIf="node.targetResult['open']"> <p *ngFor="let url of node.targetResult.urls"><a  href="{{url}}">{{url}}</a></p></div>
  </div>
</mat-expansion-panel>
